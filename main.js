(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o){var i=e.name,a=e.link,u=e.likes,c=e.owner,s=e.handleCardClick,l=e.cardDelete,f=e.elementLike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=i,this._link=a,this._likes=u,this._owner=c._id,this._id=n,this._cardSelector=o,this._handleCardClick=s,this._cardDelete=l,this._elementLike=f,this._cardId=r}var n,r;return n=t,(r=[{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id==e._id}))}},{key:"_getLikeCounter",value:function(){this._element.querySelector(".element__like-counter").textContent=this._likes.length,this._likesToggle()}},{key:"_likesToggle",value:function(e){var t=this._element.querySelector(".element__content-like");this.isLiked(e)?t.classList.add("element__content-like_active"):t.classList.remove("element__content-like_active")}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){this._element=this._getTemplate();var e=this._element.querySelector(".element__image");return this._element.querySelector(".element__content-text").textContent=this._name,e.src=this._link,e.alt=this._name,this._element.querySelector(".element__content-text").textContent=this._name,this.setEventListeners(),this._getLikeCounter(),this._renderButtons(),this._element}},{key:"setLikes",value:function(e){this._likes=e.likes,this._getLikeCounter()}},{key:"cardRemove",value:function(){this._element.remove(),this._element=null}},{key:"id",value:function(){return this._cardId}},{key:"_renderButtons",value:function(){this._deletButton=this._element.querySelector(".element__content-basket"),this._id===this._owner?this._deletButton.classList.add("element__content-basket_visible"):this._deletButton.classList.add("element__content-basket_hidden")}},{key:"setEventListeners",value:function(){var e=this;this._element.querySelector(".element__image").addEventListener("click",(function(){e._handleCardClick(e._link,e._name)})),this._element.querySelector(".element__content-basket").addEventListener("click",(function(){e._cardDelete(e)})),this._element.querySelector(".element__content-like").addEventListener("click",(function(){e._elementLike(e)}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._array=r,this._renderer=o,this._container=document.querySelector(n)}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._array.forEach((function(t){e._renderer(t)}))}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this.closeButton=this._popup.querySelector(".popup__close-button"),this._submitButton=this._popup.querySelector(".popup__save-button"),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_closeOverlay",value:function(e){e.target.classList.contains("popup")&&this.close()}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){this.closeButton.addEventListener("click",this.close.bind(this)),this._popup.addEventListener("click",this._closeOverlay.bind(this))}},{key:"loading",value:function(e){this._submitButton.textContent=e?"Сохранение...":"Сохранить"}}])&&o(t.prototype,n),e}();function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return l(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupTitle=t._popup.querySelector(".popup__title_image"),t}return t=a,(n=[{key:"open",value:function(e,t){c(f(a.prototype),"open",this).call(this),this._popupImage.src=e,this._popupImage.alt="Фото: ".concat(t),this._popupTitle.textContent=t}}])&&u(t.prototype,n),a}(i);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function a(e){var t,n=e.handleFormSubmit,r=e.popupSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,r)).handleFormSubmit=n,t._form=t._popup.querySelector(".form"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._form.querySelectorAll(".form__input"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;_(v(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e.handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){_(v(a.prototype),"close",this).call(this),this._form.reset()}}])&&d(t.prototype,n),a}(i);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(r);if(o){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._handleSubmit=t._popup.querySelector(".form"),t}return t=a,(n=[{key:"handleSubmit",value:function(e){this._handleSubmitForm=e}},{key:"setEventListeners",value:function(){var e=this;S(O(a.prototype),"setEventListeners",this).call(this),this._handleSubmit.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmitForm()}))}}])&&g(t.prototype,n),a}(i);function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t){var n=t.name,r=t.about,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n,this._aboutName=r,this._userAvatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userProfileData={},this._userProfileData.name=this._userName.textContent,this._userProfileData.about=this._aboutName.textContent,this._userProfileData}},{key:"setUserInfo",value:function(e,t,n,r){this._userName.textContent=e,this._aboutName.textContent=t,this._userId=n,this._userAvatar.src=r}}])&&L(t.prototype,n),e}();function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=n,this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.name,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.name,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._inputSelector)),n=this._formElement.querySelector(this._submitButtonSelector);this._submitButton(t,n),t.forEach((function(r){r.addEventListener("input",(function(){e._checkInputValidity(r),e._submitButton(t,n)}))}))}},{key:"_submitButton",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(this._inactiveButtonClass),t.disabled=!0):(t.classList.remove(this._inactiveButtonClass),t.disabled=!1)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("sumbit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&j(t.prototype,n),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(e){return e.ok?e.json():Promise.reject("ASHIPKA: ".concat(e.status))},T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this.headers=t.headers,this._authorization=t.headers.authorization,this._contentType=t.headers["Content-type"]}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this.headers}).then(R)}},{key:"addNewCards",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:t,link:n})}).then(R)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then(R)}},{key:"addLike",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then(R)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then(R)}},{key:"changeAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then(R)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me/"),{method:"GET",headers:this.headers}).then(R)}},{key:"changeUserInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._url,"/users/me/"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:n})}).then(R)}}])&&q(t.prototype,n),e}(),D={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},B=document.forms.formProfile,x=(new I(D,B),document.querySelector(".popup_type_profile")),A=B.elements.nameProfile,N=B.elements.aboutProfile,U=document.forms.formPlace,V=(new I(D,U),document.querySelector(".popup_type_card")),F=(U.elements.name,U.elements.link,document.querySelector(".popup_type_image")),z=document.querySelector(".popup_type_delete"),H=document.forms.formAvatar,J=(new I(D,H),document.querySelector(".popup_type_avatar")),G=(H.elements.name,document.querySelector(".profile__edit-button")),M=document.querySelector(".profile__button"),K=document.querySelector(".profile__image-edit"),$=(x.querySelector(".popup__close-button"),V.querySelector(".popup__close-button"),V.querySelector(".popup__save-button"),x.querySelector(".popup__save-button"),z.querySelector(".popup__close-button"),document.querySelector(".profile__info-title")),Q=document.querySelector(".profile__description"),W=document.querySelector(".profile__image");function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var te=new T({url:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{authorization:"3edb3715-d2b8-46c3-8d1b-ee5c4e7c3cc4","Content-Type":"application/json"}});Promise.all([te.getUserInfo(),te.getInitialCards()]).then((function(e){var n,o,i=(o=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(n,o)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],u=i[1],c=new P({name:$,about:Q,avatar:W});c.setUserInfo(a.name,a.about,a._id,a.avatar);var s=function(e){e.isLiked()?te.deleteLike(e._cardId).then((function(t){e.setLikes(t)})).catch((function(e){console.log(e)})):te.addLike(e._cardId).then((function(t){e.setLikes(t)})).catch((function(e){console.log(e)}))},l=function(e){_.open(),_.handleSubmit((function(){te.deleteCard(e._cardId).then((function(t){e.cardRemove(t),_.close()})).catch((function(e){console.log(e)}))}))},f=new b({popupSelector:x,handleFormSubmit:function(e){var t=e.nameProfile,n=e.aboutProfile;f.loading(!0),te.changeUserInfo({name:t,about:n}).then((function(e){c.setUserInfo(e.name,e.about,e._id,e.avatar),f.close()})).catch((function(e){return console.log("Error ".concat(e))})).finally((function(){f.loading(!1)}))}});f.setEventListeners();var h=new b({popupSelector:V,handleFormSubmit:function(e){var t=e.namePlace,n=e.aboutPlace;h.loading(!0),te.addNewCards({name:t,link:n}).then((function(e){m(e),h.close()})).catch((function(e){return console.log("Error ".concat(e))})).finally((function(){h.loading(!1)}))}});h.setEventListeners();var d=new b({popupSelector:J,handleFormSubmit:function(e){var t=e.avatar;d.loading(!0),te.changeAvatar({avatar:t}).then((function(e){c.setUserInfo(e.name,e.about,e._id,e.avatar),d.close()})).catch((function(e){return console.log("Error ".concat(e))})).finally((function(){d.loading(!1)}))}});d.setEventListeners();var _=new C(z);function y(e,t){v.open(e,t)}function m(e){var n=new t(Y(Y({},e),{},{handleCardClick:y,cardDelete:l,elementLike:s}),a._id,e._id,"#card"),r=n.generateCard();return k.addItem(r),n}_.setEventListeners();var v=new p(F);v.setEventListeners(),M.addEventListener("click",(function(){h.open()})),G.addEventListener("click",(function(){var e=c.getUserInfo();A.value=e.name,N.value=e.about,f.open()})),K.addEventListener("click",(function(){d.open()}));var k=new r({items:u.reverse(),renderer:function(e){m(e)}},".elements__list");k.renderItems(),new I(D,V).enableValidation(),new I(D,x).enableValidation(),new I(D,J).enableValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwibmFtZXMiOlsiQ2FyZCIsImlkIiwiY2FyZElkIiwiY2FyZFNlbGVjdG9yIiwibmFtZSIsImxpbmsiLCJsaWtlcyIsIm93bmVyIiwiaGFuZGxlQ2FyZENsaWNrIiwiY2FyZERlbGV0ZSIsImVsZW1lbnRMaWtlIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfbGlrZXMiLCJfb3duZXIiLCJfaWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkRGVsZXRlIiwiX2VsZW1lbnRMaWtlIiwiX2NhcmRJZCIsInNvbWUiLCJsaWtlIiwiX2VsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJfbGlrZXNUb2dnbGUiLCJhcnJheSIsImxpa2VCdXR0b24iLCJpc0xpa2VkIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2dldFRlbXBsYXRlIiwiY2FyZEltYWdlIiwic3JjIiwiYWx0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfZ2V0TGlrZUNvdW50ZXIiLCJfcmVuZGVyQnV0dG9ucyIsIl9kZWxldEJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2FycmF5IiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiZm9yRWFjaCIsIml0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJjbG9zZUJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJjbG9zZSIsImJpbmQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJrZXkiLCJfY2xvc2VPdmVybGF5IiwibG9hZCIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBUaXRsZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhTdWJtaXQiLCJfaGFuZGxlU3VibWl0IiwiaGFuZGxlU3VibWl0Rm9ybSIsIl9oYW5kbGVTdWJtaXRGb3JtIiwiVXNlckluZm8iLCJhYm91dCIsImF2YXRhciIsIl91c2VyTmFtZSIsIl9hYm91dE5hbWUiLCJfdXNlckF2YXRhciIsIl91c2VyUHJvZmlsZURhdGEiLCJ1c2VySWQiLCJfdXNlcklkIiwiRm9ybVZhbGlkYXRvciIsInZhbGlkYXRpb25QYXJhbXMiLCJmb3JtRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dHMiLCJBcnJheSIsImZyb20iLCJidXR0b25TdWJtaXQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiaGFuZGxlT3JpZ2luYWxSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJBcGkiLCJvcHRpb25zIiwiX3VybCIsInVybCIsImhlYWRlcnMiLCJfYXV0aG9yaXphdGlvbiIsImF1dGhvcml6YXRpb24iLCJfY29udGVudFR5cGUiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZvcm1Qcm9maWxlIiwiZm9ybXMiLCJwb3B1cFByb2ZpbGUiLCJpbnB1dE5hbWUiLCJlbGVtZW50cyIsIm5hbWVQcm9maWxlIiwiaW5wdXRBYm91dCIsImFib3V0UHJvZmlsZSIsImZvcm1QbGFjZSIsInBvcHVwQ2FyZCIsInBvcHVwSW1hZ2UiLCJwb3B1cERlbGV0ZSIsImZvcm1BdmF0YXIiLCJwb3B1cEF2YXRhciIsImVkaXRCdXR0b24iLCJjYXJkQnV0dG9uIiwiYXZhdGFyQnV0dG9uIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlQWJvdXQiLCJwcm9maWxlQXZhdGFyIiwiYXBpIiwiYWxsIiwiZ2V0VXNlckluZm8iLCJnZXRJbml0aWFsQ2FyZHMiLCJ2YWx1ZXMiLCJ1c2VyRGF0YSIsInVzZXJQcm9maWxlIiwic2V0VXNlckluZm8iLCJzZXJ2ZXJDYXJkTGlrZSIsImNhcmQiLCJkZWxldGVMaWtlIiwiZGF0YSIsInNldExpa2VzIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImFkZExpa2UiLCJzZXJ2ZXJEZWxldGUiLCJkZWxldGVQb3B1cFN1Ym1pdCIsIm9wZW4iLCJoYW5kbGVTdWJtaXQiLCJkZWxldGVDYXJkIiwiY2FyZFJlbW92ZSIsInBvcHVwRWRpdFByb2ZpbGUiLCJsb2FkaW5nIiwiY2hhbmdlVXNlckluZm8iLCJwb3B1cEFkZENhcmQiLCJuYW1lUGxhY2UiLCJhYm91dFBsYWNlIiwiYWRkTmV3Q2FyZHMiLCJhZGROZXdDYXJkIiwicG9wdXBFZGl0QXZhdGFyIiwiY2hhbmdlQXZhdGFyIiwicG9wdXBGdWxsSW1hZ2UiLCJjYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsImFkZENhcmRMaXN0IiwiYWRkSXRlbSIsInByb2ZpbGVJbmZvIiwicmV2ZXJzZSIsInJlbmRlckl0ZW1zIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJtYXBwaW5ncyI6IjZMQUFxQkEsRSxXQUNuQixhQUVFQyxFQUNBQyxFQUNBQyxHQUNBLElBSkVDLEVBSUYsRUFKRUEsS0FBTUMsRUFJUixFQUpRQSxLQUFNQyxFQUlkLEVBSmNBLE1BQU9DLEVBSXJCLEVBSnFCQSxNQUFPQyxFQUk1QixFQUo0QkEsZ0JBQWlCQyxFQUk3QyxFQUo2Q0EsV0FBWUMsRUFJekQsRUFKeURBLGEsNEZBSXpELFNBQ0FDLEtBQUtDLE1BQVFSLEVBQ2JPLEtBQUtFLE1BQVFSLEVBQ2JNLEtBQUtHLE9BQVNSLEVBQ2RLLEtBQUtJLE9BQVNSLEVBQU1TLElBQ3BCTCxLQUFLSyxJQUFNZixFQUNYVSxLQUFLTSxjQUFnQmQsRUFDckJRLEtBQUtPLGlCQUFtQlYsRUFDeEJHLEtBQUtRLFlBQWNWLEVBQ25CRSxLQUFLUyxhQUFlVixFQUNwQkMsS0FBS1UsUUFBVW5CLEUsdURBR1AsV0FDUixPQUNFUyxLQUFLRyxPQUFPUSxNQUFLLFNBQUNDLEdBQ2hCLE9BQU9BLEVBQUtQLEtBQU8sRUFBS0EsUyx3Q0FNVEwsS0FBS2EsU0FBU0MsY0FBYywwQkFDcENDLFlBQWNmLEtBQUtHLE9BQU9hLE9BQ3JDaEIsS0FBS2lCLGlCLG1DQUdNQyxHQUNYLElBQU1DLEVBQWFuQixLQUFLYSxTQUFTQyxjQUFjLDBCQUMzQ2QsS0FBS29CLFFBQVFGLEdBQ2ZDLEVBQVdFLFVBQVVDLElBQUksZ0NBRXpCSCxFQUFXRSxVQUFVRSxPQUFPLGtDLHFDQVU5QixPQUxvQkMsU0FDakJWLGNBQWNkLEtBQUtNLGVBQ25CbUIsUUFBUVgsY0FBYyxZQUN0QlksV0FBVSxLLHFDQU1iMUIsS0FBS2EsU0FBV2IsS0FBSzJCLGVBRXJCLElBQU1DLEVBQVk1QixLQUFLYSxTQUFTQyxjQUFjLG1CQWU5QyxPQWRrQmQsS0FBS2EsU0FBU0MsY0FBYywwQkFFcENDLFlBQWNmLEtBQUtDLE1BQzdCMkIsRUFBVUMsSUFBTTdCLEtBQUtFLE1BQ3JCMEIsRUFBVUUsSUFBTTlCLEtBQUtDLE1BRXJCRCxLQUFLYSxTQUFTQyxjQUNaLDBCQUNBQyxZQUFjZixLQUFLQyxNQUVyQkQsS0FBSytCLG9CQUNML0IsS0FBS2dDLGtCQUNMaEMsS0FBS2lDLGlCQUVFakMsS0FBS2EsVywrQkFHTEssR0FDUGxCLEtBQUtHLE9BQVNlLEVBQU12QixNQUNwQkssS0FBS2dDLG9CLG1DQUlMaEMsS0FBS2EsU0FBU1UsU0FDZHZCLEtBQUthLFNBQVcsTywyQkFJaEIsT0FBT2IsS0FBS1UsVSx1Q0FJWlYsS0FBS2tDLGFBQWVsQyxLQUFLYSxTQUFTQyxjQUFjLDRCQUM1Q2QsS0FBS0ssTUFBUUwsS0FBS0ksT0FDcEJKLEtBQUtrQyxhQUFhYixVQUFVQyxJQUFJLG1DQUVoQ3RCLEtBQUtrQyxhQUFhYixVQUFVQyxJQUFJLG9DLDBDQUloQixXQUNsQnRCLEtBQUthLFNBQ0ZDLGNBQWMsbUJBQ2RxQixpQkFBaUIsU0FBUyxXQUN6QixFQUFLNUIsaUJBQWlCLEVBQUtMLE1BQU8sRUFBS0QsVUFFM0NELEtBQUthLFNBQ0ZDLGNBQWMsNEJBQ2RxQixpQkFBaUIsU0FBUyxXQUN6QixFQUFLM0IsWUFBWSxNQUVyQlIsS0FBS2EsU0FDRkMsY0FBYywwQkFDZHFCLGlCQUFpQixTQUFTLFdBQ3pCLEVBQUsxQixhQUFhLFcsZ01DN0dMMkIsRSxXQUNuQixhQUFpQ0MsR0FBbUIsSUFBdENDLEVBQXNDLEVBQXRDQSxNQUFPQyxFQUErQixFQUEvQkEsVSw0RkFBK0IsU0FDbER2QyxLQUFLd0MsT0FBU0YsRUFDZHRDLEtBQUt5QyxVQUFZRixFQUNqQnZDLEtBQUswQyxXQUFhbEIsU0FBU1YsY0FBY3VCLEcscURBR25DTSxHQUNOM0MsS0FBSzBDLFdBQVdFLFFBQVFELEssb0NBR1osV0FDWjNDLEtBQUt3QyxPQUFPSyxTQUFRLFNBQUNDLEdBQ25CLEVBQUtMLFVBQVVLLFcsZ01DYkFDLEUsV0FDbkIsV0FBWUMsSSw0RkFBZSxTQUN6QmhELEtBQUtpRCxPQUFTRCxFQUNkaEQsS0FBS2tELFlBQWNsRCxLQUFLaUQsT0FBT25DLGNBQWMsd0JBQzdDZCxLQUFLbUQsY0FBZ0JuRCxLQUFLaUQsT0FBT25DLGNBQWMsdUJBQy9DZCxLQUFLb0QsTUFBUXBELEtBQUtvRCxNQUFNQyxLQUFLckQsTUFDN0JBLEtBQUtzRCxnQkFBa0J0RCxLQUFLc0QsZ0JBQWdCRCxLQUFLckQsTSxvREFJakRBLEtBQUtpRCxPQUFPNUIsVUFBVUMsSUFBSSxnQkFDMUJFLFNBQVNXLGlCQUFpQixVQUFXbkMsS0FBS3NELG1CLDhCQUkxQ3RELEtBQUtpRCxPQUFPNUIsVUFBVUUsT0FBTyxnQkFDN0JDLFNBQVMrQixvQkFBb0IsVUFBV3ZELEtBQUtzRCxtQixvQ0FHakNFLEdBQ1JBLEVBQUlDLE9BQU9wQyxVQUFVcUMsU0FBUyxVQUNoQzFELEtBQUtvRCxVLHNDQUlPSSxHQUNFLFdBQVpBLEVBQUlHLEtBQ04zRCxLQUFLb0QsVSwwQ0FLUHBELEtBQUtrRCxZQUFZZixpQkFBaUIsUUFBU25DLEtBQUtvRCxNQUFNQyxLQUFLckQsT0FDM0RBLEtBQUtpRCxPQUFPZCxpQkFBaUIsUUFBU25DLEtBQUs0RCxjQUFjUCxLQUFLckQsUyw4QkFHeEQ2RCxHQUVKN0QsS0FBS21ELGNBQWNwQyxZQURqQjhDLEVBQytCLGdCQUVBLGlCLHdtQ0N0Q2xCQyxFLGtwQkFDbkIsV0FBWWQsR0FBZSxhLDRGQUFBLFVBQ3pCLGNBQU1BLElBQ0RlLFlBQWMsRUFBS2QsT0FBT25DLGNBQWMsaUJBQzdDLEVBQUtrRCxZQUFjLEVBQUtmLE9BQU9uQyxjQUFjLHVCQUhwQixFLDBDQU10QnBCLEVBQU1ELEdBQ1QseUNBQ0FPLEtBQUsrRCxZQUFZbEMsSUFBTW5DLEVBQ3ZCTSxLQUFLK0QsWUFBWWpDLElBQWpCLGdCQUFnQ3JDLEdBQ2hDTyxLQUFLZ0UsWUFBWWpELFlBQWN0QixPLG9CQVhTc0QsRyxrbENDQXZCa0IsRSxrcEJBQ25CLGNBQWlELE1BQW5DQyxFQUFtQyxFQUFuQ0EsaUJBQWtCbEIsRUFBaUIsRUFBakJBLGNBQWlCLE8sNEZBQUEsVUFDL0MsY0FBTUEsSUFDRGtCLGlCQUFtQkEsRUFDeEIsRUFBS0MsTUFBUSxFQUFLbEIsT0FBT25DLGNBQWMsU0FIUSxFLHVEQU0vQixXQU1oQixPQUxBZCxLQUFLb0UsV0FBYXBFLEtBQUttRSxNQUFNRSxpQkFBaUIsZ0JBQzlDckUsS0FBS3NFLFlBQWMsR0FDbkJ0RSxLQUFLb0UsV0FBV3ZCLFNBQVEsU0FBQzBCLEdBQ3ZCLEVBQUtELFlBQVlDLEVBQU05RSxNQUFROEUsRUFBTUMsU0FFaEN4RSxLQUFLc0UsYywwQ0FHTSxXQUNsQixzREFDQXRFLEtBQUttRSxNQUFNaEMsaUJBQWlCLFVBQVUsU0FBQ3FCLEdBQ3JDQSxFQUFJaUIsaUJBQ0osRUFBS1AsaUJBQWlCLEVBQUtRLHdCLDhCQUs3QiwwQ0FDQTFFLEtBQUttRSxNQUFNUSxhLG9CQTFCNEI1QixHLGtsQ0NBdEI2QixFLGtwQkFDbkIsV0FBWTVCLEdBQWUsYSw0RkFBQSxVQUN6QixjQUFNQSxJQUNENkIsY0FBZ0IsRUFBSzVCLE9BQU9uQyxjQUFjLFNBRnRCLEUsa0RBS2RnRSxHQUNYOUUsS0FBSytFLGtCQUFvQkQsSSwwQ0FHUCxXQUNsQixzREFDQTlFLEtBQUs2RSxjQUFjMUMsaUJBQWlCLFVBQVUsU0FBQ3FCLEdBQzdDQSxFQUFJaUIsaUJBQ0osRUFBS00sNEIsb0JBZGtDaEMsRywwS0NGeEJpQyxFLFdBQ25CLGNBQXFDLElBQXZCdkYsRUFBdUIsRUFBdkJBLEtBQU13RixFQUFpQixFQUFqQkEsTUFBT0MsRUFBVSxFQUFWQSxRLDRGQUFVLFNBQ25DbEYsS0FBS21GLFVBQVkxRixFQUNqQk8sS0FBS29GLFdBQWFILEVBQ2xCakYsS0FBS3FGLFlBQWNILEUsMkRBT25CLE9BSEFsRixLQUFLc0YsaUJBQW1CLEdBQ3hCdEYsS0FBS3NGLGlCQUFpQjdGLEtBQU9PLEtBQUttRixVQUFVcEUsWUFDNUNmLEtBQUtzRixpQkFBaUJMLE1BQVFqRixLQUFLb0YsV0FBV3JFLFlBQ3ZDZixLQUFLc0YsbUIsa0NBR0Y3RixFQUFNd0YsRUFBT00sRUFBUUwsR0FDL0JsRixLQUFLbUYsVUFBVXBFLFlBQWN0QixFQUM3Qk8sS0FBS29GLFdBQVdyRSxZQUFja0UsRUFDOUJqRixLQUFLd0YsUUFBVUQsRUFDZnZGLEtBQUtxRixZQUFZeEQsSUFBTXFELE8sZ01DakJOTyxFLFdBQ2pCLFdBQVlDLEVBQWtCQyxJLDRGQUFhLFNBQ3ZDM0YsS0FBSzRGLGFBQWVELEVBQ3BCM0YsS0FBSzZGLGNBQWdCSCxFQUFpQkksYUFDdEM5RixLQUFLK0YsZUFBaUJMLEVBQWlCTSxjQUN2Q2hHLEtBQUtpRyxzQkFBd0JQLEVBQWlCUSxxQkFDOUNsRyxLQUFLbUcscUJBQXVCVCxFQUFpQlUsb0JBQzdDcEcsS0FBS3FHLGlCQUFtQlgsRUFBaUJZLGdCQUN6Q3RHLEtBQUt1RyxZQUFjYixFQUFpQmMsVyw2REFJeEJDLEVBQWNDLEdBQzFCLElBQU1DLEVBQWUzRyxLQUFLNEYsYUFBYTlFLGNBQWxCLFdBQW9DMkYsRUFBYWhILEtBQWpELFdBQ3JCZ0gsRUFBYXBGLFVBQVVDLElBQUl0QixLQUFLcUcsa0JBQ2hDTSxFQUFhNUYsWUFBYzJGLEVBQzNCQyxFQUFhdEYsVUFBVUMsSUFBSXRCLEtBQUt1RyxlLHNDQUlwQkUsR0FDWixJQUFNRSxFQUFlM0csS0FBSzRGLGFBQWE5RSxjQUFsQixXQUFvQzJGLEVBQWFoSCxLQUFqRCxXQUNyQmdILEVBQWFwRixVQUFVRSxPQUFPdkIsS0FBS3FHLGtCQUNuQ00sRUFBYTVGLFlBQWMsR0FDM0I0RixFQUFhdEYsVUFBVUUsT0FBT3ZCLEtBQUt1RyxlLDBDQUluQkUsR0FDWEEsRUFBYUcsU0FBU0MsTUFHdkI3RyxLQUFLOEcsZ0JBQWdCTCxHQUZyQnpHLEtBQUsrRyxnQkFBZ0JOLEVBQWNBLEVBQWFPLHFCLDJDQU9uQyxXQUNYQyxFQUFTQyxNQUFNQyxLQUFLbkgsS0FBSzRGLGFBQWF2QixpQkFBaUJyRSxLQUFLK0YsaUJBQzVEcUIsRUFBZXBILEtBQUs0RixhQUFhOUUsY0FBY2QsS0FBS2lHLHVCQUMxRGpHLEtBQUttRCxjQUFjOEQsRUFBUUcsR0FDM0JILEVBQU9wRSxTQUFRLFNBQUM0RCxHQUNaQSxFQUFhdEUsaUJBQWlCLFNBQVMsV0FDbkMsRUFBS2tGLG9CQUFvQlosR0FDekIsRUFBS3RELGNBQWM4RCxFQUFRRyxXLG9DQUt6QkgsRUFBUUcsR0FDZHBILEtBQUtzSCxpQkFBaUJMLElBQ3RCRyxFQUFhL0YsVUFBVUMsSUFBSXRCLEtBQUttRyxzQkFDaENpQixFQUFhRyxVQUFXLElBRXhCSCxFQUFhL0YsVUFBVUUsT0FBT3ZCLEtBQUttRyxzQkFDbkNpQixFQUFhRyxVQUFXLEssdUNBS2ZOLEdBQ2IsT0FBT0EsRUFBT3RHLE1BQUssU0FBQzhGLEdBQ2hCLE9BQVFBLEVBQWFHLFNBQVNDLFcseUNBTWxDN0csS0FBSzRGLGFBQWF6RCxpQkFBaUIsVUFBVSxTQUFDcUIsR0FDMUNBLEVBQUlpQixvQkFFUnpFLEtBQUt3SCwwQiw0TEN4RWIsSUFBTUMsRUFBeUIsU0FBQ0MsR0FDOUIsT0FBS0EsRUFBSUMsR0FHRkQsRUFBSUUsT0FGRkMsUUFBUUMsT0FBUixtQkFBMkJKLEVBQUlLLFVBS3JCQyxFLFdBQ25CLFdBQVlDLEksNEZBQVMsU0FDbkJqSSxLQUFLa0ksS0FBT0QsRUFBUUUsSUFDcEJuSSxLQUFLb0ksUUFBVUgsRUFBUUcsUUFDdkJwSSxLQUFLcUksZUFBaUJKLEVBQVFHLFFBQVFFLGNBQ3RDdEksS0FBS3VJLGFBQWVOLEVBQVFHLFFBQVEsZ0IsK0RBSXBDLE9BQU9JLE1BQU0sR0FBRCxPQUFJeEksS0FBS2tJLEtBQVQsVUFBdUIsQ0FDakNPLE9BQVEsTUFDUkwsUUFBU3BJLEtBQUtvSSxVQUNiTSxLQUFLakIsSyxxQ0FHa0IsSUFBZGhJLEVBQWMsRUFBZEEsS0FBTUMsRUFBUSxFQUFSQSxLQUNsQixPQUFPOEksTUFBTSxHQUFELE9BQUl4SSxLQUFLa0ksS0FBVCxVQUF1QixDQUNqQ08sT0FBUSxPQUNSTCxRQUFTcEksS0FBS29JLFFBQ2RPLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJwSixLQUFNQSxFQUNOQyxLQUFNQSxNQUVQZ0osS0FBS2pCLEssaUNBR0NsSSxHQUNULE9BQU9pSixNQUFNLEdBQUQsT0FBSXhJLEtBQUtrSSxLQUFULGtCQUF1QjNJLEdBQVUsQ0FDM0NrSixPQUFRLFNBQ1JMLFFBQVNwSSxLQUFLb0ksVUFDYk0sS0FBS2pCLEssOEJBR0ZsSSxHQUNOLE9BQU9pSixNQUFNLEdBQUQsT0FBSXhJLEtBQUtrSSxLQUFULHdCQUE2QjNJLEdBQVUsQ0FDakRrSixPQUFRLE1BQ1JMLFFBQVNwSSxLQUFLb0ksVUFDYk0sS0FBS2pCLEssaUNBR0NsSSxHQUNULE9BQU9pSixNQUFNLEdBQUQsT0FBSXhJLEtBQUtrSSxLQUFULHdCQUE2QjNJLEdBQVUsQ0FDakRrSixPQUFRLFNBQ1JMLFFBQVNwSSxLQUFLb0ksVUFDYk0sS0FBS2pCLEssc0NBR2UsSUFBVnZDLEVBQVUsRUFBVkEsT0FDYixPQUFPc0QsTUFBTSxHQUFELE9BQUl4SSxLQUFLa0ksS0FBVCxvQkFBaUMsQ0FDM0NPLE9BQVEsUUFDUkwsUUFBU3BJLEtBQUtvSSxRQUNkTyxLQUFNQyxLQUFLQyxVQUFVLENBQ25CM0QsT0FBUUEsTUFFVHdELEtBQUtqQixLLG9DQUlSLE9BQU9lLE1BQU0sR0FBRCxPQUFJeEksS0FBS2tJLEtBQVQsY0FBMkIsQ0FDckNPLE9BQVEsTUFDUkwsUUFBU3BJLEtBQUtvSSxVQUNiTSxLQUFLakIsSyx3Q0FHc0IsSUFBZmhJLEVBQWUsRUFBZkEsS0FBTXdGLEVBQVMsRUFBVEEsTUFDckIsT0FBT3VELE1BQU0sR0FBRCxPQUFJeEksS0FBS2tJLEtBQVQsY0FBMkIsQ0FDckNPLE9BQVEsUUFDUkwsUUFBU3BJLEtBQUtvSSxRQUNkTyxLQUFNQyxLQUFLQyxVQUFVLENBQ25CcEosS0FBTUEsRUFDTndGLE1BQU9BLE1BRVJ5RCxLQUFLakIsUSxzQkN6RUMvQixFQUFtQixDQUM5QkksYUFBYyxRQUNkRSxjQUFlLGVBQ2ZFLHFCQUFzQixzQkFDdEJFLG9CQUFxQiw4QkFDckJFLGdCQUFpQix5QkFDakJFLFdBQVksdUJBTURzQyxFQUFjdEgsU0FBU3VILE1BQU1ELFlBSzdCRSxHQUp1QixJQUFJdkQsRUFDdENDLEVBQ0FvRCxHQUUwQnRILFNBQVNWLGNBQWMsd0JBQ3RDbUksRUFBWUgsRUFBWUksU0FBU0MsWUFDakNDLEVBQWFOLEVBQVlJLFNBQVNHLGFBR2xDQyxFQUFZOUgsU0FBU3VILE1BQU1PLFVBSzNCQyxHQUpxQixJQUFJOUQsRUFDcENDLEVBQ0E0RCxHQUV1QjlILFNBQVNWLGNBQWMscUJBS25DMEksR0FKZ0JGLEVBQVVKLFNBQVN6SixLQUNwQjZKLEVBQVVKLFNBQVN4SixLQUdyQjhCLFNBQVNWLGNBQWMsc0JBR3BDMkksRUFBY2pJLFNBQVNWLGNBQWMsc0JBR3JDNEksRUFBYWxJLFNBQVN1SCxNQUFNVyxXQUs1QkMsR0FKc0IsSUFBSWxFLEVBQ3JDQyxFQUNBZ0UsR0FFeUJsSSxTQUFTVixjQUFjLHVCQUlyQzhJLEdBSG1CRixFQUFXUixTQUFTekosS0FHMUIrQixTQUFTVixjQUFjLDBCQUNwQytJLEVBQWFySSxTQUFTVixjQUFjLG9CQUNwQ2dKLEVBQWV0SSxTQUFTVixjQUFjLHdCQWN0Q2lKLEdBYnFCZixFQUFhbEksY0FDN0Msd0JBRTZCeUksRUFBVXpJLGNBQWMsd0JBQ3hCeUksRUFBVXpJLGNBQWMsdUJBQ3RCa0ksRUFBYWxJLGNBQzVDLHVCQUUrQjJJLEVBQVkzSSxjQUMzQyx3QkFJeUJVLFNBQVNWLGNBQWMseUJBQ3JDa0osRUFBZXhJLFNBQVNWLGNBQWMseUJBQ3RDbUosRUFBZ0J6SSxTQUFTVixjQUFjLG1CLGt5QkN4Q3BELElBQU1vSixHQUFNLElBQUlsQyxFQUFJLENBQ2xCRyxJQUFLLDhDQUNMQyxRQUFTLENBQ1BFLGNBQWUsdUNBQ2YsZUFBZ0Isc0JBSXBCVCxRQUFRc0MsSUFBSSxDQUFDRCxHQUFJRSxjQUFlRixHQUFJRyxvQkFBb0IzQixNQUFLLFNBQUM0QixHQUFXLEksSUFBQSxHLEVBQUEsRSw0Q0FDOUNBLEksc3dCQUFsQkMsRUFEZ0UsS0FDdER6SCxFQURzRCxLQUdqRTBILEVBQWMsSUFBSXhGLEVBQVMsQ0FDL0J2RixLQUFNc0ssRUFDTjlFLE1BQU8rRSxFQUNQOUUsT0FBUStFLElBR1ZPLEVBQVlDLFlBQ1ZGLEVBQVM5SyxLQUNUOEssRUFBU3RGLE1BQ1RzRixFQUFTbEssSUFDVGtLLEVBQVNyRixRQUdYLElBQU13RixFQUFpQixTQUFDQyxHQUNsQkEsRUFBS3ZKLFVBQ1A4SSxHQUNHVSxXQUFXRCxFQUFLakssU0FDaEJnSSxNQUFLLFNBQUNtQyxHQUNMRixFQUFLRyxTQUFTRCxNQUhsQixPQUtTLFNBQUNFLEdBQ05DLFFBQVFDLElBQUlGLE1BR2hCYixHQUNHZ0IsUUFBUVAsRUFBS2pLLFNBQ2JnSSxNQUFLLFNBQUNtQyxHQUNMRixFQUFLRyxTQUFTRCxNQUhsQixPQUtTLFNBQUNFLEdBQ05DLFFBQVFDLElBQUlGLE9BS2RJLEVBQWUsU0FBQ1IsR0FDcEJTLEVBQWtCQyxPQUNsQkQsRUFBa0JFLGNBQWEsV0FDN0JwQixHQUNHcUIsV0FBV1osRUFBS2pLLFNBQ2hCZ0ksTUFBSyxTQUFDaEIsR0FDTGlELEVBQUthLFdBQVc5RCxHQUNoQjBELEVBQWtCaEksV0FKdEIsT0FNUyxTQUFDMkgsR0FDTkMsUUFBUUMsSUFBSUYsVUFLZFUsRUFBbUIsSUFBSXhILEVBQWMsQ0FDekNqQixjQUFlZ0csRUFDZjlFLGlCQUFrQixZQUFtQyxJQUFoQ2lGLEVBQWdDLEVBQWhDQSxZQUFhRSxFQUFtQixFQUFuQkEsYUFDaENvQyxFQUFpQkMsU0FBUSxHQUN6QnhCLEdBQ0d5QixlQUFlLENBQ2RsTSxLQUFNMEosRUFDTmxFLE1BQU9vRSxJQUVSWCxNQUFLLFNBQUNoQixHQUNMOEMsRUFBWUMsWUFBWS9DLEVBQUlqSSxLQUFNaUksRUFBSXpDLE1BQU95QyxFQUFJckgsSUFBS3FILEVBQUl4QyxRQUMxRHVHLEVBQWlCckksV0FQckIsT0FTUyxTQUFDMkgsR0FBRCxPQUFTQyxRQUFRQyxJQUFSLGdCQUFxQkYsT0FUdkMsU0FVVyxXQUNQVSxFQUFpQkMsU0FBUSxTQUlqQ0QsRUFBaUIxSixvQkFFakIsSUFBTTZKLEVBQWUsSUFBSTNILEVBQWMsQ0FDckNqQixjQUFldUcsRUFDZnJGLGlCQUFrQixZQUErQixJQUE1QjJILEVBQTRCLEVBQTVCQSxVQUFXQyxFQUFpQixFQUFqQkEsV0FDOUJGLEVBQWFGLFNBQVEsR0FDckJ4QixHQUNHNkIsWUFBWSxDQUNYdE0sS0FBTW9NLEVBQ05uTSxLQUFNb00sSUFFUHBELE1BQUssU0FBQ2hCLEdBQ0xzRSxFQUFXdEUsR0FDWGtFLEVBQWF4SSxXQVBqQixPQVNTLFNBQUMySCxHQUFELE9BQVNDLFFBQVFDLElBQVIsZ0JBQXFCRixPQVR2QyxTQVVXLFdBQ1BhLEVBQWFGLFNBQVEsU0FJN0JFLEVBQWE3SixvQkFFYixJQUFNa0ssRUFBa0IsSUFBSWhJLEVBQWMsQ0FDeENqQixjQUFlMkcsRUFDZnpGLGlCQUFrQixZQUFnQixJQUFiZ0IsRUFBYSxFQUFiQSxPQUNuQitHLEVBQWdCUCxTQUFRLEdBQ3hCeEIsR0FDR2dDLGFBQWEsQ0FDWmhILE9BQVFBLElBRVR3RCxNQUFLLFNBQUNoQixHQUNMOEMsRUFBWUMsWUFBWS9DLEVBQUlqSSxLQUFNaUksRUFBSXpDLE1BQU95QyxFQUFJckgsSUFBS3FILEVBQUl4QyxRQUMxRCtHLEVBQWdCN0ksV0FOcEIsT0FRUyxTQUFDMkgsR0FBRCxPQUFTQyxRQUFRQyxJQUFSLGdCQUFxQkYsT0FSdkMsU0FTVyxXQUNQa0IsRUFBZ0JQLFNBQVEsU0FJaENPLEVBQWdCbEssb0JBRWhCLElBQU1xSixFQUFvQixJQUFJeEcsRUFBZ0I2RSxHQUc5QyxTQUFTNUosRUFBZ0JKLEVBQU1DLEdBQzdCeU0sRUFBZWQsS0FBSzVMLEVBQU1DLEdBRzVCLFNBQVNzTSxFQUFXMUosR0FDbEIsSUFBTXFJLEVBQU8sSUFBSXRMLEVBQUosT0FFTmlELEdBRk0sSUFHVHpDLGdCQUFpQkEsRUFDakJDLFdBQVlxTCxFQUNacEwsWUFBYTJLLElBRWZILEVBQVNsSyxJQUNUaUMsRUFBTWpDLElEM0pVLFNDOEpaK0wsRUFBY3pCLEVBQUswQixlQUV6QixPQURBQyxFQUFZQyxRQUFRSCxHQUNiekIsRUFwQlRTLEVBQWtCckosb0JBdUJsQixJQUFNb0ssRUFBaUIsSUFBSXJJLEVBQWUwRixHQUMxQzJDLEVBQWVwSyxvQkFFZjhILG1CQUE0QixTQUFTLFdBQ25DK0IsRUFBYVAsVUFHZnpCLG1CQUE0QixTQUFTLFdBQ25DLElBQU00QyxFQUFjaEMsRUFBWUosY0FDaENuQixRQUFrQnVELEVBQVkvTSxLQUM5QjJKLFFBQW1Cb0QsRUFBWXZILE1BQy9Cd0csRUFBaUJKLFVBR25CdkIsbUJBQThCLFNBQVMsV0FDckNtQyxFQUFnQlosVUFHbEIsSUFBTWlCLEVBQWMsSUFBSWxLLEVBQ3RCLENBQ0VFLE1BQU9RLEVBQUsySixVQUNabEssU0FBVSxTQUFDc0ksR0FDVG1CLEVBQVduQixLQUdmLG1CQUVGeUIsRUFBWUksY0FHbUIsSUFBSWpILEVBQWNDLEVBQWtCNkQsR0FDNUNvRCxtQkFFVyxJQUFJbEgsRUFDcENDLEVBQ0FzRCxHQUV3QjJELG1CQUVPLElBQUlsSCxFQUNuQ0MsRUFDQWlFLEdBRXVCZ0QsdUIiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBsaW5rLCBsaWtlcywgb3duZXIsIGhhbmRsZUNhcmRDbGljaywgY2FyZERlbGV0ZSwgZWxlbWVudExpa2UgfSxcclxuICAgIGlkLFxyXG4gICAgY2FyZElkLFxyXG4gICAgY2FyZFNlbGVjdG9yXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMuX293bmVyID0gb3duZXIuX2lkO1xyXG4gICAgdGhpcy5faWQgPSBpZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2NhcmREZWxldGUgPSBjYXJkRGVsZXRlO1xyXG4gICAgdGhpcy5fZWxlbWVudExpa2UgPSBlbGVtZW50TGlrZTtcclxuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmRJZDtcclxuICB9XHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICB0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxpa2UuX2lkID09IHRoaXMuX2lkO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9nZXRMaWtlQ291bnRlcigpIHtcclxuICAgIGNvbnN0IGxpa2VzQ291bnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1jb3VudGVyXCIpO1xyXG4gICAgbGlrZXNDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2xpa2VzVG9nZ2xlKCk7XHJcbiAgfVxyXG5cclxuICBfbGlrZXNUb2dnbGUoYXJyYXkpIHtcclxuICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fY29udGVudC1saWtlXCIpO1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZChhcnJheSkpIHtcclxuICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudF9fY29udGVudC1saWtlX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImVsZW1lbnRfX2NvbnRlbnQtbGlrZV9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xyXG4gICAgY29uc3QgY2FyZFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2NvbnRlbnQtdGV4dFwiKTtcclxuXHJcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICBjYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmVsZW1lbnRfX2NvbnRlbnQtdGV4dFwiXHJcbiAgICApLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9nZXRMaWtlQ291bnRlcigpO1xyXG4gICAgdGhpcy5fcmVuZGVyQnV0dG9ucygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgc2V0TGlrZXMoYXJyYXkpIHtcclxuICAgIHRoaXMuX2xpa2VzID0gYXJyYXkubGlrZXM7XHJcbiAgICB0aGlzLl9nZXRMaWtlQ291bnRlcigpO1xyXG4gIH1cclxuXHJcbiAgY2FyZFJlbW92ZSgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGlkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRJZDtcclxuICB9XHJcblxyXG4gIF9yZW5kZXJCdXR0b25zKCkge1xyXG4gICAgdGhpcy5fZGVsZXRCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fY29udGVudC1iYXNrZXRcIik7XHJcbiAgICBpZiAodGhpcy5faWQgPT09IHRoaXMuX293bmVyKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19jb250ZW50LWJhc2tldF92aXNpYmxlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZGVsZXRCdXR0b24uY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2NvbnRlbnQtYmFza2V0X2hpZGRlblwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19jb250ZW50LWJhc2tldFwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jYXJkRGVsZXRlKHRoaXMpO1xyXG4gICAgICB9KTtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fY29udGVudC1saWtlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRMaWtlKHRoaXMpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2FycmF5ID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9hcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgICB0aGlzLmNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc2F2ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfY2xvc2VPdmVybGF5KGV2dCkge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLmNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2Nsb3NlT3ZlcmxheS5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIGxvYWRpbmcobG9hZCkge1xyXG4gICAgaWYgKGxvYWQpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QuNGC0YxcIjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190aXRsZV9pbWFnZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4obGluaywgbmFtZSkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBg0KTQvtGC0L46ICR7bmFtZX1gO1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IGhhbmRsZUZvcm1TdWJtaXQsIHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVN1Ym1pdChoYW5kbGVTdWJtaXRGb3JtKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtID0gaGFuZGxlU3VibWl0Rm9ybTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0oKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2Fib3V0TmFtZSA9IGFib3V0O1xyXG4gICAgdGhpcy5fdXNlckF2YXRhciA9IGF2YXRhcjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgdGhpcy5fdXNlclByb2ZpbGVEYXRhID0ge307XHJcbiAgICB0aGlzLl91c2VyUHJvZmlsZURhdGEubmFtZSA9IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50O1xyXG4gICAgdGhpcy5fdXNlclByb2ZpbGVEYXRhLmFib3V0ID0gdGhpcy5fYWJvdXROYW1lLnRleHRDb250ZW50O1xyXG4gICAgcmV0dXJuIHRoaXMuX3VzZXJQcm9maWxlRGF0YTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0LCB1c2VySWQsIGF2YXRhcikge1xyXG4gICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fYWJvdXROYW1lLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcbn1cclxuIiwiLy8g0JrQu9Cw0YHRgSwg0LrQvtGC0L7RgNGL0Lkg0L3QsNGB0YLRgNCw0LjQstCw0LXRgiDQstCw0LvQuNC00LDRhtC40Y4g0L/QvtC70LXQuSDRhNC+0YDQvNGLXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IodmFsaWRhdGlvblBhcmFtcywgZm9ybUVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHZhbGlkYXRpb25QYXJhbXMuZm9ybVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uUGFyYW1zLmlucHV0U2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uUGFyYW1zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uUGFyYW1zLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvblBhcmFtcy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IHZhbGlkYXRpb25QYXJhbXMuZXJyb3JDbGFzcztcclxuICAgIH1cclxuXHJcbiAgICAvLyDQn9GA0LjQstCw0YLQvdGL0Lkg0LzQtdGC0L7QtCDQvdC10LLQsNC70LjQtNC90L7Qs9C+INGB0L7RgdGC0L7Rj9C90LjRjyDQv9C+0LvQtdC5XHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQubmFtZX0tZXJyb3JgKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQn9GA0LjQstCw0YLQvdGL0Lkg0LzQtdGC0L7QtCDQstCw0LvQuNC00L3QvtCz0L4g0YHQvtGB0YLQvtGP0L3QuNGPINC/0L7Qu9C10LlcclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQubmFtZX0tZXJyb3JgKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCf0YDQuNCy0LDRgtC90YvQuSDQvNC10YLQvtC0INC/0YDQvtCy0LXRgNC60Lgg0YHQvtGB0YLQvtGP0L3QuNGPINC/0L7Qu9C10LlcclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vINCf0YDQuNCy0LDRgtC90YvQuSDQvNC10YLQvtC0INC+0LHRgNCw0LHQvtGC0LrQuCBpbnB1dCdhINC90LAg0LrQsNC20LTQvtC1INC/0L7Qu9C1IFxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIGNvbnN0IGlucHV0cyA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uU3VibWl0ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uKGlucHV0cywgYnV0dG9uU3VibWl0KTtcclxuICAgICAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uKGlucHV0cywgYnV0dG9uU3VibWl0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3N1Ym1pdEJ1dHRvbihpbnB1dHMsIGJ1dHRvblN1Ym1pdCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRzKSkge1xyXG4gICAgICAgICAgICBidXR0b25TdWJtaXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgYnV0dG9uU3VibWl0LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBidXR0b25TdWJtaXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgYnV0dG9uU3VibWl0LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vINCf0YDQuNCy0LDRgtC90YvQuSDQvNC10YLQvtC0INC/0YDQvtCy0LXRgNC60Lgg0L3QsCDQstCw0LvQuNC00L3QvtC1INC30LDQv9C+0LvQvdC10L3QuNC1XHJcbiAgICBfaGFzSW52YWxpZElucHV0KGlucHV0cykge1xyXG4gICAgICAgIHJldHVybiBpbnB1dHMuc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCf0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INCy0LDQu9C40LTQsNGG0LjQuCDQtNC70Y8g0LLRgdC10YUg0YTQvtGA0LxcclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VtYml0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG59O1xyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgXHJcbiIsImNvbnN0IGhhbmRsZU9yaWdpbmFsUmVzcG9uc2UgPSAocmVzKSA9PiB7XHJcbiAgaWYgKCFyZXMub2spIHtcclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgQVNISVBLQTogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuICByZXR1cm4gcmVzLmpzb24oKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5fdXJsID0gb3B0aW9ucy51cmw7XHJcbiAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcbiAgICB0aGlzLl9hdXRob3JpemF0aW9uID0gb3B0aW9ucy5oZWFkZXJzLmF1dGhvcml6YXRpb247XHJcbiAgICB0aGlzLl9jb250ZW50VHlwZSA9IG9wdGlvbnMuaGVhZGVyc1tcIkNvbnRlbnQtdHlwZVwiXTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgIH0pLnRoZW4oaGFuZGxlT3JpZ2luYWxSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBhZGROZXdDYXJkcyh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKGhhbmRsZU9yaWdpbmFsUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KS50aGVuKGhhbmRsZU9yaWdpbmFsUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KS50aGVuKGhhbmRsZU9yaWdpbmFsUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KS50aGVuKGhhbmRsZU9yaWdpbmFsUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlQXZhdGFyKHsgYXZhdGFyIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogYXZhdGFyLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oaGFuZGxlT3JpZ2luYWxSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KS50aGVuKGhhbmRsZU9yaWdpbmFsUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlVXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKGhhbmRsZU9yaWdpbmFsUmVzcG9uc2UpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcblxyXG4vLyDQnNCw0YHRgdC40LIg0LrQsNGA0YLQvtGH0LXQulxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW107XHJcblxyXG4vLyDQntCx0YrQtdC60YIg0YEg0Y3Qu9C10LzQtdC90YLQsNC80Lgg0YTQvtGA0LxcclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25QYXJhbXMgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3NhdmUtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRJZCA9IFwiI2NhcmRcIjtcclxuXHJcbi8vcG9wdXBQcm9maWxlINC4INCy0L3Rg9GC0YDQtdC90L3QvtGB0YLQuFxyXG5leHBvcnQgY29uc3QgZm9ybVByb2ZpbGUgPSBkb2N1bWVudC5mb3Jtcy5mb3JtUHJvZmlsZTtcclxuZXhwb3J0IGNvbnN0IGZvcm1Qcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblBhcmFtcyxcclxuICBmb3JtUHJvZmlsZVxyXG4pO1xyXG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX3Byb2ZpbGVcIik7XHJcbmV4cG9ydCBjb25zdCBpbnB1dE5hbWUgPSBmb3JtUHJvZmlsZS5lbGVtZW50cy5uYW1lUHJvZmlsZTtcclxuZXhwb3J0IGNvbnN0IGlucHV0QWJvdXQgPSBmb3JtUHJvZmlsZS5lbGVtZW50cy5hYm91dFByb2ZpbGU7XHJcblxyXG4vL3BvcHVwQ2FyZCDQuCDQstC90YPRgtGA0LXQvdC90L7RgdGC0LhcclxuZXhwb3J0IGNvbnN0IGZvcm1QbGFjZSA9IGRvY3VtZW50LmZvcm1zLmZvcm1QbGFjZTtcclxuZXhwb3J0IGNvbnN0IGZvcm1QbGFjZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25QYXJhbXMsXHJcbiAgZm9ybVBsYWNlXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfY2FyZFwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmROYW1lSW5wdXQgPSBmb3JtUGxhY2UuZWxlbWVudHMubmFtZTtcclxuZXhwb3J0IGNvbnN0IGNhcmRJbWFnZVVybCA9IGZvcm1QbGFjZS5lbGVtZW50cy5saW5rO1xyXG5cclxuLy9wb3B1cEltYWdlINC4INCy0L3Rg9GC0YDQtdC90L3QvtGB0YLQuFxyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9pbWFnZVwiKTtcclxuXHJcbi8vcG9wdXBEZWxldGUg0Lgg0LLQvdGD0YLRgNC10L3QvdC+0YHRgtC4XHJcbmV4cG9ydCBjb25zdCBwb3B1cERlbGV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9kZWxldGVcIik7XHJcblxyXG4vL3BvcHVwQXZhdGFyINC4INCy0L3Rg9GC0YDQtdC90L3QvtGB0YLQuFxyXG5leHBvcnQgY29uc3QgZm9ybUF2YXRhciA9IGRvY3VtZW50LmZvcm1zLmZvcm1BdmF0YXI7XHJcbmV4cG9ydCBjb25zdCBmb3JtQXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblBhcmFtcyxcclxuICBmb3JtQXZhdGFyXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9hdmF0YXJcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyVXJsID0gZm9ybUF2YXRhci5lbGVtZW50cy5uYW1lO1xyXG5cclxuLy9idXR0b25zXHJcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVDbG9zZUJ1dHRvbiA9IHBvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnBvcHVwX19jbG9zZS1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgY2FyZENsb3NlQnV0dG9uID0gcG9wdXBDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGltYWdlU2F2ZUJ1dHRvbiA9IHBvcHVwQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zYXZlLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVTYXZlQnV0dG9uID0gcG9wdXBQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX3NhdmUtYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwRGVsZXRlQnV0dG9uID0gcG9wdXBEZWxldGUucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuXHJcbi8vX19fX1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm8tdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2VcIik7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZExpc3RTZWxlY3RvciA9IFwiLmVsZW1lbnRzX19saXN0XCI7XHJcblxyXG4vL2V4cG9ydCBjb25zdCBwb3B1cHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIikpO1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhTdWJtaXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcblxyXG5pbXBvcnQge1xyXG4gIHZhbGlkYXRpb25QYXJhbXMsXHJcbiAgcHJvZmlsZU5hbWUsXHJcbiAgcHJvZmlsZUFib3V0LFxyXG4gIHByb2ZpbGVBdmF0YXIsXHJcbiAgY2FyZElkLFxyXG4gIHBvcHVwUHJvZmlsZSxcclxuICBwb3B1cENhcmQsXHJcbiAgcG9wdXBJbWFnZSxcclxuICBwb3B1cEF2YXRhcixcclxuICBwb3B1cERlbGV0ZSxcclxuICBlZGl0QnV0dG9uLFxyXG4gIGNhcmRCdXR0b24sXHJcbiAgYXZhdGFyQnV0dG9uLFxyXG4gIGlucHV0TmFtZSxcclxuICBpbnB1dEFib3V0LFxyXG4gIHByb2ZpbGVBdmF0YXJVcmwsXHJcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG4vL0FQSVxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICB1cmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0xN1wiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiM2VkYjM3MTUtZDJiOC00NmMzLThkMWItZWU1YzRlN2MzY2M0XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSkudGhlbigodmFsdWVzKSA9PiB7XHJcbiAgY29uc3QgW3VzZXJEYXRhLCBpdGVtXSA9IHZhbHVlcztcclxuXHJcbiAgY29uc3QgdXNlclByb2ZpbGUgPSBuZXcgVXNlckluZm8oe1xyXG4gICAgbmFtZTogcHJvZmlsZU5hbWUsXHJcbiAgICBhYm91dDogcHJvZmlsZUFib3V0LFxyXG4gICAgYXZhdGFyOiBwcm9maWxlQXZhdGFyLFxyXG4gIH0pO1xyXG5cclxuICB1c2VyUHJvZmlsZS5zZXRVc2VySW5mbyhcclxuICAgIHVzZXJEYXRhLm5hbWUsXHJcbiAgICB1c2VyRGF0YS5hYm91dCxcclxuICAgIHVzZXJEYXRhLl9pZCxcclxuICAgIHVzZXJEYXRhLmF2YXRhclxyXG4gICk7XHJcblxyXG4gIGNvbnN0IHNlcnZlckNhcmRMaWtlID0gKGNhcmQpID0+IHtcclxuICAgIGlmIChjYXJkLmlzTGlrZWQoKSkge1xyXG4gICAgICBhcGlcclxuICAgICAgICAuZGVsZXRlTGlrZShjYXJkLl9jYXJkSWQpXHJcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgIGNhcmQuc2V0TGlrZXMoZGF0YSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFwaVxyXG4gICAgICAgIC5hZGRMaWtlKGNhcmQuX2NhcmRJZClcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgY2FyZC5zZXRMaWtlcyhkYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNlcnZlckRlbGV0ZSA9IChjYXJkKSA9PiB7XHJcbiAgICBkZWxldGVQb3B1cFN1Ym1pdC5vcGVuKCk7XHJcbiAgICBkZWxldGVQb3B1cFN1Ym1pdC5oYW5kbGVTdWJtaXQoKCkgPT4ge1xyXG4gICAgICBhcGlcclxuICAgICAgICAuZGVsZXRlQ2FyZChjYXJkLl9jYXJkSWQpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgY2FyZC5jYXJkUmVtb3ZlKHJlcyk7XHJcbiAgICAgICAgICBkZWxldGVQb3B1cFN1Ym1pdC5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gICAgcG9wdXBTZWxlY3RvcjogcG9wdXBQcm9maWxlLFxyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKHsgbmFtZVByb2ZpbGUsIGFib3V0UHJvZmlsZSB9KSA9PiB7XHJcbiAgICAgIHBvcHVwRWRpdFByb2ZpbGUubG9hZGluZyh0cnVlKTtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLmNoYW5nZVVzZXJJbmZvKHtcclxuICAgICAgICAgIG5hbWU6IG5hbWVQcm9maWxlLFxyXG4gICAgICAgICAgYWJvdXQ6IGFib3V0UHJvZmlsZSxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQsIHJlcy5faWQsIHJlcy5hdmF0YXIpO1xyXG4gICAgICAgICAgcG9wdXBFZGl0UHJvZmlsZS5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvciAke2Vycn1gKSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICBwb3B1cEVkaXRQcm9maWxlLmxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9KTtcclxuICBwb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gIGNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICAgIHBvcHVwU2VsZWN0b3I6IHBvcHVwQ2FyZCxcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6ICh7IG5hbWVQbGFjZSwgYWJvdXRQbGFjZSB9KSA9PiB7XHJcbiAgICAgIHBvcHVwQWRkQ2FyZC5sb2FkaW5nKHRydWUpO1xyXG4gICAgICBhcGlcclxuICAgICAgICAuYWRkTmV3Q2FyZHMoe1xyXG4gICAgICAgICAgbmFtZTogbmFtZVBsYWNlLFxyXG4gICAgICAgICAgbGluazogYWJvdXRQbGFjZSxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgIGFkZE5ld0NhcmQocmVzKTtcclxuICAgICAgICAgIHBvcHVwQWRkQ2FyZC5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvciAke2Vycn1gKSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICBwb3B1cEFkZENhcmQubG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0pO1xyXG4gIHBvcHVwQWRkQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICBjb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBwb3B1cEF2YXRhcixcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6ICh7IGF2YXRhciB9KSA9PiB7XHJcbiAgICAgIHBvcHVwRWRpdEF2YXRhci5sb2FkaW5nKHRydWUpO1xyXG4gICAgICBhcGlcclxuICAgICAgICAuY2hhbmdlQXZhdGFyKHtcclxuICAgICAgICAgIGF2YXRhcjogYXZhdGFyLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8ocmVzLm5hbWUsIHJlcy5hYm91dCwgcmVzLl9pZCwgcmVzLmF2YXRhcik7XHJcbiAgICAgICAgICBwb3B1cEVkaXRBdmF0YXIuY2xvc2UoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3IgJHtlcnJ9YCkpXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgcG9wdXBFZGl0QXZhdGFyLmxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9KTtcclxuICBwb3B1cEVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgY29uc3QgZGVsZXRlUG9wdXBTdWJtaXQgPSBuZXcgUG9wdXBXaXRoU3VibWl0KHBvcHVwRGVsZXRlKTtcclxuICBkZWxldGVQb3B1cFN1Ym1pdC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xyXG4gICAgcG9wdXBGdWxsSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZE5ld0NhcmQoaXRlbXMpIHtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgICAge1xyXG4gICAgICAgIC4uLml0ZW1zLFxyXG4gICAgICAgIGhhbmRsZUNhcmRDbGljazogaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgICAgIGNhcmREZWxldGU6IHNlcnZlckRlbGV0ZSxcclxuICAgICAgICBlbGVtZW50TGlrZTogc2VydmVyQ2FyZExpa2UsXHJcbiAgICAgIH0sXHJcbiAgICAgIHVzZXJEYXRhLl9pZCxcclxuICAgICAgaXRlbXMuX2lkLFxyXG4gICAgICBjYXJkSWRcclxuICAgICk7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICBhZGRDYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgIHJldHVybiBjYXJkO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcG9wdXBGdWxsSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBJbWFnZSk7XHJcbiAgcG9wdXBGdWxsSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgY2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdXBBZGRDYXJkLm9wZW4oKTtcclxuICB9KTtcclxuXHJcbiAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgY29uc3QgcHJvZmlsZUluZm8gPSB1c2VyUHJvZmlsZS5nZXRVc2VySW5mbygpO1xyXG4gICAgaW5wdXROYW1lLnZhbHVlID0gcHJvZmlsZUluZm8ubmFtZTtcclxuICAgIGlucHV0QWJvdXQudmFsdWUgPSBwcm9maWxlSW5mby5hYm91dDtcclxuICAgIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xyXG4gIH0pO1xyXG5cclxuICBhdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVwRWRpdEF2YXRhci5vcGVuKCk7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGFkZENhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAgICB7XHJcbiAgICAgIGl0ZW1zOiBpdGVtLnJldmVyc2UoKSxcclxuICAgICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgYWRkTmV3Q2FyZChkYXRhKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBcIi5lbGVtZW50c19fbGlzdFwiXHJcbiAgKTtcclxuICBhZGRDYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG5cclxuICAvL9CS0LDQu9C40LTQsNGG0LjRjyDRhNC+0YDQvFxyXG4gIGNvbnN0IHBvcHVwQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uUGFyYW1zLCBwb3B1cENhcmQpO1xyXG4gIHBvcHVwQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuICBjb25zdCBwb3B1cFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgICB2YWxpZGF0aW9uUGFyYW1zLFxyXG4gICAgcG9wdXBQcm9maWxlXHJcbiAgKTtcclxuICBwb3B1cFByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbiAgY29uc3QgcG9wdXBBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgICB2YWxpZGF0aW9uUGFyYW1zLFxyXG4gICAgcG9wdXBBdmF0YXJcclxuICApO1xyXG4gIHBvcHVwQXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9